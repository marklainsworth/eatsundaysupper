let isMetric=false,isItalian=false,currentScale=1;const baseData={titleEn:"Cantucci, Almond",titleIt:"Cantucci, Mandorla",yieldEn:"36 Pieces",yieldIt:"36 Pezzi",yieldBaseNumber:36,difficultyEn:"Easy",difficultyIt:"Facile",prepEn:"25 min",prepIt:"25 min",cookEn:"24 min",cookIt:"24 min"};function toggleUnits(){isMetric=!isMetric;const btn=document.getElementById('unitBtn'),us=document.querySelectorAll('.unit.us, .amount.us'),metric=document.querySelectorAll('.unit.metric, .amount.metric');isMetric?(btn.textContent='US',us.forEach(e=>e.style.display='none'),metric.forEach(e=>e.style.display='inline')):(btn.textContent='Metric',us.forEach(e=>e.style.display='inline'),metric.forEach(e=>e.style.display='none'))}function toggleLanguage(){isItalian=!isItalian;const btn=document.getElementById('langBtn'),scaledYield=baseData.yieldBaseNumber*currentScale;isItalian?(btn.textContent='ðŸ‡ºðŸ‡¸',document.getElementById('recipeTitle').textContent=baseData.titleIt,document.getElementById('yield').textContent=`${scaledYield} Pezzi`,document.getElementById('difficulty').textContent=baseData.difficultyIt,document.getElementById('prepTime').textContent=baseData.prepIt,document.getElementById('cookTime').textContent=baseData.cookIt,document.querySelectorAll('.lang-label').forEach(e=>e.textContent=e.getAttribute('data-it')),document.querySelectorAll('.ingredient-name').forEach(e=>e.textContent=e.getAttribute('data-it')),document.querySelectorAll('.instruction-text').forEach(e=>e.textContent=e.getAttribute('data-it')),document.querySelectorAll('.notes-text').forEach(e=>e.textContent=e.getAttribute('data-it'))):(btn.textContent='ðŸ‡®ðŸ‡¹',document.getElementById('recipeTitle').textContent=baseData.titleEn,document.getElementById('yield').textContent=`${scaledYield} Pieces`,document.getElementById('difficulty').textContent=baseData.difficultyEn,document.getElementById('prepTime').textContent=baseData.prepEn,document.getElementById('cookTime').textContent=baseData.cookEn,document.querySelectorAll('.lang-label').forEach(e=>e.textContent=e.getAttribute('data-en')),document.querySelectorAll('.ingredient-name').forEach(e=>e.textContent=e.getAttribute('data-en')),document.querySelectorAll('.instruction-text').forEach(e=>e.textContent=e.getAttribute('data-en')),document.querySelectorAll('.notes-text').forEach(e=>e.textContent=e.getAttribute('data-en')))}function scaleRecipe(){const scale=parseFloat(document.getElementById('scaleSelect').value);currentScale=scale;const scaledYield=Math.round(baseData.yieldBaseNumber*scale);document.getElementById('yield').textContent=isItalian?`${scaledYield} Pezzi`:`${scaledYield} Pieces`;document.querySelectorAll('#ingredientsList li').forEach(item=>{const usBase=parseFloat(item.getAttribute('data-us')),metricBase=parseFloat(item.getAttribute('data-metric')),usScaled=usBase*scale,metricScaled=metricBase*scale;item.querySelector('.amount.us').textContent=formatNumber(usScaled);item.querySelector('.amount.metric').textContent=formatNumber(metricScaled)})}function formatNumber(num){if(num===0.25)return'Â¼';if(num===0.33||num===0.333)return'â…“';if(num===0.5)return'Â½';if(num===0.66||num===0.667)return'â…”';if(num===0.75)return'Â¾';const whole=Math.floor(num),decimal=num-whole;if(Math.abs(decimal-0.25)<0.01&&whole>0)return`${whole}Â¼`;if(Math.abs(decimal-0.33)<0.01&&whole>0)return`${whole}â…“`;if(Math.abs(decimal-0.5)<0.01&&whole>0)return`${whole}Â½`;if(Math.abs(decimal-0.67)<0.01&&whole>0)return`${whole}â…”`;if(Math.abs(decimal-0.75)<0.01&&whole>0)return`${whole}Â¾`;if(num%1!==0)return(Math.round(num*10)/10).toString();return num.toString()}function saveAsRecipeCard(){const w=window.open('','_blank','width=900,height=800');if(!w){showNotification('Please allow pop-ups');return}const t=document.getElementById('recipeTitle').textContent,y=document.getElementById('yield').textContent,d=document.getElementById('difficulty').textContent,p=document.getElementById('prepTime').textContent,c=document.getElementById('cookTime').textContent,i=document.getElementById('ingredientsList').innerHTML,ins=document.querySelector('.instructions-list').innerHTML,n=document.querySelector('.notes-section').innerHTML,f=document.querySelector('.recipe-footer').innerHTML,l=document.querySelectorAll('.lang-label');w.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>${t}</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;line-height:1.6;color:#333;padding:40px}.recipe-container{max-width:800px;margin:0 auto;position:relative}.logo-badge{position:absolute;top:0;right:0;width:100px;height:auto}.recipe-title{font-family:Georgia,'Times New Roman',serif;font-size:2.2em;margin-bottom:20px;color:#2c2c2c;padding-right:120px}.recipe-meta{display:flex;gap:30px;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #e0e0e0;flex-wrap:wrap}.meta-item{font-size:0.95em}.difficulty{display:inline-block;padding:4px 12px;border-radius:4px;font-size:0.85em;font-weight:600}.difficulty.easy{background:#e8f5e9;color:#2e7d32}.difficulty.medium{background:#fff3e0;color:#e65100}.difficulty.hard{background:#ffebee;color:#c62828}.yield{font-size:1.1em;margin-bottom:25px;color:#666}.section-title{font-family:Georgia,'Times New Roman',serif;font-size:1.4em;margin:30px 0 20px 0;color:#2c2c2c}.ingredients-list{list-style:none;margin-bottom:30px}.ingredients-list li{padding:12px 0;border-bottom:1px solid #f0f0f0}.measurement{font-weight:600;color:#4a7c59}.measurement .metric{display:${isMetric?'inline':'none'}}.measurement .us{display:${isMetric?'none':'inline'}}.instructions-list{counter-reset:step-counter;list-style:none}.instructions-list li{counter-increment:step-counter;margin-bottom:20px;padding-left:45px;position:relative;line-height:1.7}.instructions-list li::before{content:counter(step-counter);position:absolute;left:0;top:0;width:32px;height:32px;background:#4a7c59;color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:0.9em}.notes-section{margin-top:40px;padding:20px;background:#f9f9f9;border-left:4px solid #4a7c59;border-radius:4px}.notes-section h3{font-family:Georgia,'Times New Roman',serif;font-size:1.1em;margin-bottom:10px;color:#2c2c2c}.notes-section p{color:#666;line-height:1.7;font-size:0.95em}.recipe-footer{margin-top:40px;padding-top:30px;border-top:1px solid #e0e0e0;text-align:center}.footer-website{font-size:1em;font-weight:600;color:#4a7c59;margin-bottom:8px}.footer-social{font-size:0.9em;color:#666;display:flex;align-items:center;justify-content:center;gap:12px}.social-icon{width:20px;height:20px;color:#4a7c59}.social-text{font-size:0.9em;color:#666}@media print{body{padding:20px}.logo-badge{width:80px}}</style></head><body><div class="recipe-container"><img class="logo-badge" src="https://images.squarespace-cdn.com/content/61fd89b45ec78c52f2d9e346/3e2ae630-6dd2-4bd3-a3d6-c3f6beced096/Test4.png?content-type=image%2Fpng"><h1 class="recipe-title">${t}</h1><div class="recipe-meta"><div class="meta-item"><strong>${l[0].textContent}</strong> ${p}</div><div class="meta-item"><strong>${l[1].textContent}</strong> ${c}</div><div class="meta-item"><span class="difficulty ${d.toLowerCase()}">${d}</span></div></div><div class="yield"><strong>${l[2].textContent}</strong> ${y}</div><h2 class="section-title">${l[3].textContent}</h2><ul class="ingredients-list">${i}</ul><h2 class="section-title">${l[4].textContent}</h2><ol class="instructions-list">${ins}</ol><div class="notes-section">${n}</div><div class="recipe-footer">${f}</div></div><script>window.onload=function(){window.focus();setTimeout(function(){window.print()},500)}</script></body></html>`);w.document.close()}function toggleShareMenu(){document.getElementById('shareMenu').classList.toggle('active')}function copyLink(){navigator.clipboard.writeText(window.location.href);showNotification('Link copied!');toggleShareMenu()}function shareToFacebook(){window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,'_blank');toggleShareMenu()}function shareToPinterest(){window.open(`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(window.location.href)}&description=${encodeURIComponent(document.querySelector('.recipe-title').textContent)}`,'_blank');toggleShareMenu()}function shareToEmail(){window.location.href=`mailto:?subject=${encodeURIComponent(document.querySelector('.recipe-title').textContent)}&body=${encodeURIComponent('Check out this recipe: '+window.location.href)}`;toggleShareMenu()}function showNotification(msg){const n=document.getElementById('notification');n.textContent=msg;n.classList.add('show');setTimeout(()=>n.classList.remove('show'),3000)}document.addEventListener('click',function(e){const sb=document.getElementById('shareBtn'),sm=document.getElementById('shareMenu');if(!sb.contains(e.target)&&sm.classList.contains('active'))sm.classList.remove('active')});
