let isMetric=false,isItalian=false,currentScale=1;const baseData={titleEn:"Cantucci, Almond",titleIt:"Cantucci, Mandorla",yieldEn:"36 Pieces",yieldIt:"36 Pezzi",yieldBaseNumber:36,difficultyEn:"Easy",difficultyIt:"Facile",prepEn:"25 min",prepIt:"25 min",cookEn:"24 min",cookIt:"24 min"};function toggleUnits(){isMetric=!isMetric;const e=document.getElementById("unitBtn"),t=document.querySelectorAll(".unit.us, .amount.us"),n=document.querySelectorAll(".unit.metric, .amount.metric");isMetric?(e.textContent="US",t.forEach(e=>e.style.display="none"),n.forEach(e=>e.style.display="inline")):(e.textContent="Metric",t.forEach(e=>e.style.display="inline"),n.forEach(e=>e.style.display="none"))}function toggleLanguage(){isItalian=!isItalian;const e=document.getElementById("langBtn"),t=baseData.yieldBaseNumber*currentScale;isItalian?(e.textContent="ðŸ‡ºðŸ‡¸",document.getElementById("recipeTitle").textContent=baseData.titleIt,document.getElementById("yield").textContent=t+" Pezzi",document.getElementById("difficulty").textContent=baseData.difficultyIt,document.getElementById("prepTime").textContent=baseData.prepIt,document.getElementById("cookTime").textContent=baseData.cookIt,document.querySelectorAll(".lang-label").forEach(e=>e.textContent=e.getAttribute("data-it")),document.querySelectorAll(".ingredient-name").forEach(e=>e.textContent=e.getAttribute("data-it")),document.querySelectorAll(".instruction-text").forEach(e=>e.textContent=e.getAttribute("data-it")),document.querySelectorAll(".notes-text").forEach(e=>e.textContent=e.getAttribute("data-it"))):(e.textContent="ðŸ‡®ðŸ‡¹",document.getElementById("recipeTitle").textContent=baseData.titleEn,document.getElementById("yield").textContent=t+" Pieces",document.getElementById("difficulty").textContent=baseData.difficultyEn,document.getElementById("prepTime").textContent=baseData.prepEn,document.getElementById("cookTime").textContent=baseData.cookEn,document.querySelectorAll(".lang-label").forEach(e=>e.textContent=e.getAttribute("data-en")),document.querySelectorAll(".ingredient-name").forEach(e=>e.textContent=e.getAttribute("data-en")),document.querySelectorAll(".instruction-text").forEach(e=>e.textContent=e.getAttribute("data-en")),document.querySelectorAll(".notes-text").forEach(e=>e.textContent=e.getAttribute("data-en")))}function scaleRecipe(){const e=parseFloat(document.getElementById("scaleSelect").value);currentScale=e;const t=Math.round(baseData.yieldBaseNumber*e);document.getElementById("yield").textContent=isItalian?t+" Pezzi":t+" Pieces",document.querySelectorAll("#ingredientsList .ingredient-row").forEach(t=>{const n=parseFloat(t.getAttribute("data-us")),r=parseFloat(t.getAttribute("data-metric"));t.querySelector(".amount.us").textContent=formatNumber(n*e),t.querySelector(".amount.metric").textContent=formatNumber(r*e)})}function formatNumber(e){if(.25===e)return"Â¼";if(.33===e||.333===e)return"â…“";if(.5===e)return"Â½";if(.66===e||.667===e)return"â…”";if(.75===e)return"Â¾";const t=Math.floor(e),n=e-t;return Math.abs(n-.25)<.01&&t>0?t+"Â¼":Math.abs(n-.33)<.01&&t>0?t+"â…“":Math.abs(n-.5)<.01&&t>0?t+"Â½":Math.abs(n-.67)<.01&&t>0?t+"â…”":Math.abs(n-.75)<.01&&t>0?t+"Â¾":e%1!=0?(Math.round(10*e)/10).toString():e.toString()}function saveAsRecipeCard(){const e=window.open("","_blank","width=900,height=800");if(!e)return void showNotification("Please allow pop-ups");const t=document.getElementById("recipeTitle").textContent,n=document.getElementById("yield").textContent,r=document.getElementById("difficulty").textContent,i=document.getElementById("prepTime").textContent,o=document.getElementById("cookTime").textContent,a=document.getElementById("ingredientsList").innerHTML,c=document.querySelector(".instructions-list").innerHTML,s=document.querySelector(".notes-section").innerHTML,l=document.querySelector(".recipe-footer").innerHTML,d=document.querySelectorAll(".lang-label");e.document.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><title>'+t+'</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;line-height:1.6;color:#333;padding:40px}.recipe-container{max-width:800px;margin:0 auto;position:relative}.logo-badge{position:absolute;top:0;right:0;width:100px;height:auto}.recipe-title{font-family:Georgia,"Times New Roman",serif;font-size:2.2em;margin-bottom:20px;color:#2c2c2c;padding-right:120px}.recipe-meta{display:flex;gap:30px;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #e0e0e0;flex-wrap:wrap}.meta-item{font-size:.95em}.difficulty{display:inline-block;padding:4px 12px;border-radius:4px;font-size:.85em;font-weight:600}.difficulty.easy{background:#e8f5e9;color:#2e7d32}.difficulty.medium{background:#fff3e0;color:#e65100}.difficulty.hard{background:#ffebee;color:#c62828}.yield{font-size:1.1em;margin-bottom:25px;color:#666}.section-title{font-family:Georgia,"Times New Roman",serif;font-size:1.4em;margin:30px 0 20px 0;color:#2c2c2c}.ingredients-header{display:grid;grid-template-columns:1fr 60px;padding-bottom:10px;border-bottom:2px solid #4a7c59;margin-bottom:10px}.header-title{font-weight:600;color:#4a7c59;font-size:.95em}.ingredients-list{list-style:none;margin-bottom:30px}.ingredient-row{display:grid;grid-template-columns:1fr 60px;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.ingredient-row:last-child{border-bottom:none}.ingredient-content{font-size:1em}.measurement{font-weight:600;color:#4a7c59}.measurement .metric{display:'+(isMetric?"inline":"none")+'}.measurement .us{display:'+(isMetric?"none":"inline")+'}.link-cell{text-align:center}.ingredient-link{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#f0f0f0;color:#4a7c59;text-decoration:none}.ingredient-link svg{width:14px;height:14px}.instructions-list{counter-reset:step-counter;list-style:none}.instructions-list li{counter-increment:step-counter;margin-bottom:20px;padding-left:45px;position:relative;line-height:1.7}.instructions-list li::before{content:counter(step-counter);position:absolute;left:0;top:0;width:32px;height:32px;background:#4a7c59;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9em}.notes-section{margin-top:40px;padding:20px;background:#f9f9f9;border-left:4px solid #4a7c59;border-radius:4px}.notes-section h3{font-family:Georgia,"Times New Roman",serif;font-size:1.1em;margin-bottom:10px;color:#2c2c2c}.notes-section p{color:#666;line-height:1.7;font-size:.95em}.recipe-footer{margin-top:40px;padding-top:30px;border-top:1px solid #e0e0e0;text-align:center}.footer-website{font-size:1em;font-weight:600;color:#4a7c59;margin-bottom:8px}.footer-social{font-size:.9em;color:#666;display:flex;align-items:center;justify-content:center;gap:12px}.social-icon{width:20px;height:20px;color:#4a7c59}.social-text{font-size:.9em;color:#666}@media print{body{padding:20px}.logo-badge{width:80px}.link-cell{display:none}}</style></head><body><div class="recipe-container"><img class="logo-badge" src="https://images.squarespace-cdn.com/content/61fd89b45ec78c52f2d9e346/3e2ae630-6dd2-4bd3-a3d6-c3f6beced096/Test4.png?content-type=image%2Fpng"><h1 class="recipe-title">'+t+'</h1><div class="recipe-meta"><div class="meta-item"><strong>'+d[0].textContent+"</strong> "+i+'</div><div class="meta-item"><strong>'+d[1].textContent+"</strong> "+o+'</div><div class="meta-item"><span class="difficulty '+r.toLowerCase()+'">'+r+'</span></div></div><div class="yield"><strong>'+d[2].textContent+"</strong> "+n+'</div><h2 class="section-title">'+d[3].textContent+'</h2><div class="ingredients-header"><div class="header-title">Ingredient</div><div class="header-title" style="text-align:center">Links</div></div><ul class="ingredients-list">'+a+'</ul><h2 class="section-title">'+d[4].textContent+"</h2><ol class=\"instructions-list\">"+c+'</ol><div class="notes-section">'+s+'</div><div class="recipe-footer">'+l+"</div></div><script>window.onload=function(){window.focus();setTimeout(function(){window.print()},500)}<\/script></body></html>"),e.document.close()}function toggleShareMenu(){document.getElementById("shareMenu").classList.toggle("active")}function copyLink(){navigator.clipboard.writeText(window.location.href),showNotification("Link copied!"),toggleShareMenu()}function shareToFacebook(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href),"_blank"),toggleShareMenu()}function shareToPinterest(){window.open("https://pinterest.com/pin/create/button/?url="+encodeURIComponent(window.location.href)+"&description="+encodeURIComponent(document.querySelector(".recipe-title").textContent),"_blank"),toggleShareMenu()}function shareToEmail(){window.location.href="mailto:?subject="+encodeURIComponent(document.querySelector(".recipe-title").textContent)+"&body="+encodeURIComponent("Check out this recipe: "+window.location.href),toggleShareMenu()}function showNotification(e){const t=document.getElementById("notification");t.textContent=e,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),3e3)}document.addEventListener("click",function(e){const t=document.getElementById("shareBtn"),n=document.getElementById("shareMenu");!t.contains(e.target)&&n.classList.contains("active")&&n.classList.remove("active")});
